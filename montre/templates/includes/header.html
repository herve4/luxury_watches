<header x-data="header" class="fixed top-0 w-full bg-black/80 backdrop-blur-sm z-50 border-b border-gray-800">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="font-playfair text-2xl font-bold text-white hover:text-gold-500 transition transform hover:scale-105">
        BOUTILUXE
      </a>

      <!-- Menu Desktop -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="{% url 'product_list' %}" class="block px-6 py-3 text-lg hover:bg-gray-800">Boutique</a>
        <a href="{% url 'about' %}" class="block px-6 py-3 text-lg hover:bg-gray-800">À propos</a>
        <a href="{% url 'contact' %}" class="block px-6 py-3 text-lg hover:bg-gray-800">Contact</a>
      </div>

      <!-- CTA + Burger -->
      <div class="flex items-center space-x-4">
        <a href="{% url 'contact' %}" class="hidden md:block btn-gold">Nous contacter</a>
        <!-- Burger menu -->
        <button @click="isOpen = !isOpen" aria-label="Ouvrir le menu mobile" class="md:hidden text-white p-2 relative z-60">
          <svg x-show="!isOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg x-show="isOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Overlay -->
    <div
      x-show="isOpen"
      x-transition:enter="transition ease-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
      class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40 overlay"
      @click="isOpen = false"
      x-cloak>
    </div>

    <!-- Overlay avec flou -->
    <div x-show="isOpen"
         @click.self="isOpen = false"
         x-transition:enter="transition-opacity ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition-opacity ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"
         style="backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);"
         aria-hidden="true">
    </div>

    <!-- Panel mobile -->
    <div x-show="isOpen"
         x-cloak
         x-transition:enter="transition-transform ease-out duration-300"
         x-transition:enter-start="translate-x-full"
         x-transition:enter-end="translate-x-0"
         x-transition:leave="transition-transform ease-in duration-250"
         x-transition:leave-start="translate-x-0"
         x-transition:leave-end="translate-x-full"
         class="md:hidden fixed inset-y-0 right-0 w-10/12 max-w-sm bg-gradient-to-b from-gray-900/95 to-black/95 shadow-2xl border-l border-yellow-500/30 z-50 overflow-y-auto menu-panel"
         style="height: 100vh !important; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
         
      <div class="p-6 flex flex-col min-h-screen">
        <!-- En-tête du menu -->
        <div class="flex justify-between items-center pb-4 border-b border-gray-800">
          <a href="/" class="text-2xl font-bold text-white">
            <span class="text-yellow-500">BOUTI</span>
            <span>LUXE</span>
          </a>
          <button @click="isOpen = false" class="text-gray-400 hover:text-yellow-500 transition p-2 -mr-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <!-- Navigation principale -->
        <nav class="flex-1 py-6 space-y-2 overflow-y-auto">
          <a href="{% url 'product_list' %}" 
             class="flex items-center px-4 py-3 text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition-colors duration-200">
            <svg class="mr-3 h-5 w-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
            </svg>
            Boutique
          </a>
          
          <a href="{% url 'about' %}" 
             class="flex items-center px-4 py-3 text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition-colors duration-200">
            <svg class="mr-3 h-5 w-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            À propos
          </a>
          
          <a href="{% url 'contact' %}" 
             class="flex items-center px-4 py-3 text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition-colors duration-200">
            <svg class="mr-3 h-5 w-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            Contact
          </a>
        </nav>

        <!-- Pied de page mobile -->
        <div class="pt-4 border-t border-gray-800">
          <a href="{% url 'contact' %}" 
             class="w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-black bg-yellow-500 hover:bg-yellow-600 transition-colors duration-200">
            <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            Nous contacter
          </a>
          
          <!-- Réseaux sociaux -->
          <div class="mt-6 flex justify-center space-x-6">
            <a href="#" class="text-gray-400 hover:text-yellow-500">
              <span class="sr-only">Facebook</span>
              <i class="fab fa-facebook-f text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-yellow-500">
              <span class="sr-only">Instagram</span>
              <i class="fab fa-instagram text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-yellow-500">
              <span class="sr-only">Pinterest</span>
              <i class="fab fa-pinterest-p text-xl"></i>
            </a>
          </div>
          
          <p class="mt-6 text-center text-xs text-gray-500">
            &copy; 2024 BOUTILUXE. Tous droits réservés.
          </p>
        </div>
      </div>
    </div>
  </nav>
</header>
<style>
    /* Couleurs et apparence */
.gold-gradient {
  background: linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%);
}

.btn-gold {
  @apply bg-gradient-to-r from-yellow-400 to-gold-500 text-black px-6 py-2 rounded-full font-semibold shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105;
}

/* Styles pour le menu mobile */
.menu-panel {
  -webkit-overflow-scrolling: touch;
  max-height: 100vh !important;
  height: 100% !important;
  display: flex;
  flex-direction: column;
  box-shadow: -4px 0 30px rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(17, 24, 39, 0.85) !important;
}

/* Correction pour le contenu défilant */
.menu-panel > div {
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

/* Amélioration de l'accessibilité du menu */
[aria-expanded="true"] {
  @apply text-yellow-500;
}

/* Animation du bouton burger */
.burger-line {
  @apply block w-6 h-0.5 bg-white transition duration-300 ease-in-out;
}

/* Styles pour les liens du menu mobile */
.mobile-link {
  @apply block px-4 py-3 text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition-colors duration-200;
}

/* Amélioration du contraste pour l'accessibilité */
@media (max-width: 640px) {
  .nav-link {
    @apply text-base py-3 px-4;
  }
  
  .btn-gold {
    @apply text-sm py-2 px-4;
  }
}


.nav-link:hover::after {
  width: 100%;
}

/* Lien mobile stylé */
.mobile-link {
  @apply block px-4 py-3 rounded-xl bg-gold-500/5 hover:bg-gold-500/10 text-white font-semibold transition;
}

/* Désactiver scroll horizontal */
html, body {
  overflow-x: hidden;
  max-width: 100%;
}

/* Scroll personnalisé */
.overflow-y-auto::-webkit-scrollbar {
  width: 4px;
}
.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #D4AF37;
  border-radius: 2px;
}

/* Éviter clignotement d'Alpine */
[x-cloak] {
  display: none !important;
}

</style>

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('header', () => ({
      isOpen: false,
      init() {
        this.$watch('isOpen', (value) => {
          if (value) {
            document.body.classList.add('menu-open');
            document.body.style.overflow = 'hidden';
          } else {
            document.body.classList.remove('menu-open');
            document.body.style.overflow = '';
          }
        });
      }
    }));
  });
</script>
