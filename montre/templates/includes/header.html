<header x-data="header" class="fixed top-0 w-full bg-black/80 backdrop-blur-sm z-50 border-b border-gray-800">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="font-playfair text-2xl font-bold text-white hover:text-gold-500 transition transform hover:scale-105">
        BOUTILUXE
      </a>

      <!-- Menu Desktop -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="{% url 'product_list' %}" class="nav-link">Boutique</a>
        <a href="#histoire" class="nav-link">À propos</a>
        <a href="#contact" class="nav-link">Contact</a>
      </div>

      <!-- CTA + Burger -->
      <div class="flex items-center space-x-4">
        <button class="hidden md:block btn-gold">Nous contacter</button>
        <!-- Burger menu -->
        <button @click="isOpen = !isOpen" aria-label="Ouvrir le menu mobile" class="md:hidden text-white p-2 relative z-60">
          <svg x-show="!isOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg x-show="isOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Overlay -->
    <div
      x-show="isOpen"
      x-transition:enter="transition ease-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
      class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40 overlay"
      @click="isOpen = false"
      x-cloak>
    </div>

    <!-- Panel mobile -->
    <div x-show="isOpen"
         x-cloak
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-x-full"
         x-transition:enter-end="opacity-100 translate-x-0"
         x-transition:leave="transition ease-in duration-250"
         x-transition:leave-start="opacity-100 translate-x-0"
         x-transition:leave-end="opacity-0 translate-x-full"
         class="md:hidden fixed top-0 right-0 h-full w-80 max-w-full bg-gradient-to-b from-black to-gray-900 shadow-2xl border-l border-gold-500/20 z-50 overflow-y-auto menu-panel">
         
      <div class="p-6 space-y-6">
        <div class="flex justify-between items-center">
          <span class="text-xl font-playfair text-gold-500">MENU</span>
          <button @click="isOpen = false" class="text-gray-400 hover:text-gold-500 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <!-- Liens mobile -->
        <a href="#collection" class="mobile-link" @click="isOpen = false">Collection</a>
        <a href="#histoire" class="mobile-link" @click="isOpen = false">À propos</a>
        <a href="#contact" class="mobile-link" @click="isOpen = false">Contact</a>

        <!-- CTA -->
        <button class="w-full btn-gold text-lg">Nous contacter</button>
      </div>
    </div>
  </nav>
</header>
<style>
    /* Couleurs et apparence */
.gold-gradient {
  background: linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #D4AF37 100%);
}

.btn-gold {
  @apply bg-gradient-to-r from-yellow-400 to-gold-500 text-black px-6 py-2 rounded-full font-semibold shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105;
}

/* Liens du menu desktop */
.nav-link {
  @apply relative text-gray-300 hover:text-gold-500 transition;
}

.nav-link::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -4px;
  width: 0%;
  height: 2px;
  background: #D4AF37;
  transition: width 0.3s ease-in-out;
}

.nav-link:hover::after {
  width: 100%;
}

/* Lien mobile stylé */
.mobile-link {
  @apply block px-4 py-3 rounded-xl bg-gold-500/5 hover:bg-gold-500/10 text-white font-semibold transition;
}

/* Désactiver scroll horizontal */
html, body {
  overflow-x: hidden;
  max-width: 100%;
}

/* Scroll personnalisé */
.overflow-y-auto::-webkit-scrollbar {
  width: 4px;
}
.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #D4AF37;
  border-radius: 2px;
}

/* Éviter clignotement d'Alpine */
[x-cloak] {
  display: none !important;
}

</style>

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('header', () => ({
      isOpen: false,
      init() {
        this.$watch('isOpen', (value) => {
          if (value) {
            document.body.classList.add('menu-open');
            document.body.style.overflow = 'hidden';
          } else {
            document.body.classList.remove('menu-open');
            document.body.style.overflow = '';
          }
        });
      }
    }));
  });
</script>
